<!doctype html><html class=no-js lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>安装Redmine 2.0 - 神秘极客</title><script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script><meta name=description content><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class=container><div class=logo><a class=logo__link href=/ title=神秘极客 rel=home><div class=logo__title>神秘极客</div><div class=logo__tagline>学习编程之美</div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>菜单</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/archives/><i class="fa fa-road"></i><span class=menu__text>学编程</span></a></li><li class=menu__item><a class=menu__link href=/about/><i class="fa fa-heart"></i><span class=menu__text>关于我</span></a></li><li class=menu__item><a class=menu__link href=/donate/><i class="fa fa-heart"></i><span class=menu__text>捐赠</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>安装Redmine 2.0</h1></header><div class="post__toc toc"><div class=toc__title>目录</div><div class=toc__menu><nav id=TableOfContents></nav></div></div><div class="content post__content clearfix"><p>Redmine 这厮就这样大张旗鼓的升级到了2.0。正好公司的mantisbt实在是不给力，就准备安装Redmine。很之前安装的方法并没有什么区别，可以参考之前安装<a href=https://xbc.me/centos-install-redmine/>CentOS 6 安装Redmine</a>。特此记录下。 下载Ruby 1.8.7稳定版即可。</p><pre><code>cd ~

wget ftp://ftp.ruby-lang.org/pub/ruby/1.8/ruby-1.8.7.tar.gz

tar  xzvf ruby-1.8.7.tar.gz

cd ruby-1.8.7

./configure

make &amp;&amp; make install
</code></pre><p>查看Ruby的版本,会报错。</p><pre><code>ruby -v

-bash: /usr/bin/ruby: No such file or directory
</code></pre><p>查看ruby的安装路径</p><pre><code>which ruby

/usr/local/bin/ruby

where ruby

ruby: /usr/lib/ruby /usr/local/bin/ruby /usr/local/lib/ruby
</code></pre><p>修复ruby的路径问题</p><pre><code>ln -s /usr/local/bin/ruby /usr/bin/ruby
</code></pre><p>现在可以查看ruby的版本了</p><pre><code>ruby -v

ruby 1.8.7 (2008-05-31 patchlevel 0) [i686-linux]
</code></pre><p>安装rubygems</p><pre><code>wget http://production.cf.rubygems.org/rubygems/rubygems-1.4.2.tgz

tar xzvf rubygems-1.4.2.tgz

cd rubygems-1.4.2

ruby setup.rb

RubyGems 1.4.2 installed
</code></pre><p>修复gem的路径问题</p><pre><code>ln -s /usr/local/bin/gem /usr/bin/gem

gem -v

1.4.2
</code></pre><p>安装 passenger模块</p><pre><code>gem install passenger

//安装passenger的apache模块，同样也有nginx下的模块
//passenger-install-nginx-module

passenger-install-apache2-module
</code></pre><p>会提示你有哪些依赖没有被安装。</p><pre><code>To install GNU C++ compiler:
Please run yum install gcc-c++ as root.

To install Curl development headers with SSL support:
Please run yum install curl-devel as root.

To install Zlib development headers:
Please run yum install zlib-devel as root.

yum install gcc-c++

yum install curl-devel

yum install zlib-devel

passenger-install-apache2-module
</code></pre><p>安装完成后 添加 配置到apache的配置文件</p><pre><code>vim /etc/httpd/conf/httpd.conf

LoadModule passenger_module /usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.12/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.12
PassengerRuby /usr/local/bin/ruby

service httpd restart
</code></pre><p>从rubyforge下载redmine</p><pre><code>wget http://rubyforge.org/frs/download.php/76134/redmine-2.0.0.tar.gz

tar xzvf redmine-2.0.0.tar.gz

cp -rf redmine-2.0.0 /var/www/redmine

//设置相关属性
cd /var/www

chmod 755 -R redmine

chown apache.apache -R redmine
</code></pre><p>添加网站配置文件</p><pre><code>DocumentRoot /var/www/redmine/public
ServerName pms.xbc.me
</code></pre><p>添加数据库配置文件</p><pre><code>cd redmine/config

cp database.yml.example database.yml

vim database.yml

production:
adapter: mysql
database: redmine
host: localhost
username: redmine
password: my_password
encoding: utf8

chmod 755 -R database.yml

chown apache.apache -R database.yml
</code></pre><p>不要忘记了 redmine 1.4以后添加bundler依赖。</p><pre><code>gem install bundler

bundle install --without development test
</code></pre><p>如果在bundle安装时，出现下面的这些错误的话，去掉一些不需要的扩展。</p><pre><code>An error occured while installing pg (0.13.2), and Bundler cannot continue.
An error occured while installing rmagick (2.13.1), and Bundler cannot continue.
An error occured while installing sqlite3 (1.3.6), and Bundler cannot continue.

bundle install --without development test postgresql rmagick sqlite
</code></pre><p>生成session 密钥</p><pre><code>cd /var/www/redmine

//Generate a session store secret.
rake generate_secret_token
</code></pre><p>创建数据库结构。</p><pre><code>//Create the database structure, by running the following command under the application root directory:

RAILS_ENV=production rake db:migrate
</code></pre><p>导入默认的配置文件</p><pre><code>RAILS_ENV=production rake redmine:load_default_data
</code></pre><p>安装环境为Centos 5.6+Apache2.2。</p><p>参考</p><ol><li><a href=http://www.redmine.org/boards/2/topics/30244>bundle install error</a></li><li><a href=http://www.redmine.org/projects/redmine/wiki/RedmineInstall>redmine wiki RedmineInstall</a></li></ol></div><footer class=post__footer><div class="post__tags tags clearfix"><svg class="tags__badge icon icon-tag" width="16" height="16" viewBox="0 0 32 32"><path d="M32 19c0 1-1 2-1 2L21 31s-1 1-2 1-2-1-2-1L2 16c-1-1-1.4-2-1.4-2S0 12.5.0 11V3C0 1.5.8.8.8.8S1.5.0 3 0h8c1.5.0 3 .6 3 .6S15 1 16 2l15 15s1 1 1 2zM7 10a3 3 0 100-6 3 3 0 000 6z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/%E5%90%8E%E7%AB%AF/ rel=tag>后端</a></li></ul></div></footer></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="GeekWho avatar" src=/images/avatar.jpeg class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>关于 GeekWho</span></div><div class=authorbox__description>PHP and Go are the best language in the world.</div></div><div id=gitalk-container></div><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css><script src=https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js></script><script>const gitalk=new Gitalk({clientID:'13b47a49e0f947bf69e0',clientSecret:'a4f2f9622955ed3993f37d1b82eddab12abdeffe',repo:'xbc.me',owner:'geekwho11',admin:['geekwho11'],id:location.pathname,distractionFreeMode:false});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('gitalk-container').innerHTML='Gitalk comments not available by default when the website is previewed locally.';return;}
gitalk.render('gitalk-container');})();</script></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><label><input class=widget-search__field type=search placeholder=搜索... name=q aria-label=搜索...></label>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=/></form></div><div class="widget-recent widget"><h4 class=widget__title>近期文章</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/how-to-create-an-archives-page-with-hugo/>为hugo添加归档页面</a></li><li class=widget__item><a class=widget__link href=/build-master-slave-mysql-service/>搭建主从MySQL服务</a></li><li class=widget__item><a class=widget__link href=/git-command-line-development-guide/>Git命令行开发指南</a></li><li class=widget__item><a class=widget__link href=/php-short-syntax-and-operator/>PHP的简化运算符</a></li><li class=widget__item><a class=widget__link href=/rd-environment/>研发环境那些事</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>分类</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/%E5%AD%A6%E7%BC%96%E7%A8%8B/>学编程</a></li><li class=widget__item><a class=widget__link href=/categories/%E7%A5%9E%E7%A7%98%E6%9E%81%E5%AE%A2/>神秘极客</a></li><li class=widget__item><a class=widget__link href=/categories/%E9%9A%8F%E7%AC%94/>随笔</a></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>标签</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/githubpages/ title=GithubPages>GithubPages</a>
<a class="widget-taglist__link widget__link btn" href=/tags/go/ title=Go>Go</a>
<a class="widget-taglist__link widget__link btn" href=/tags/javascript/ title=JavaScript>JavaScript</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=Linux>Linux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/magento/ title=Magento>Magento</a>
<a class="widget-taglist__link widget__link btn" href=/tags/mysql/ title=MySQL>MySQL</a>
<a class="widget-taglist__link widget__link btn" href=/tags/nginx/ title=Nginx>Nginx</a>
<a class="widget-taglist__link widget__link btn" href=/tags/php/ title=PHP>PHP</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ubuntu/ title=Ubuntu>Ubuntu</a>
<a class="widget-taglist__link widget__link btn" href=/tags/unittest/ title=UnitTest>UnitTest</a>
<a class="widget-taglist__link widget__link btn" href=/tags/wordpress/ title=WordPress>WordPress</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%89%8D%E7%AB%AF/ title=前端>前端</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%90%8E%E7%AB%AF/ title=后端>后端</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%B8%B8%E8%A7%81%E7%AE%97%E6%B3%95/ title=常见算法>常见算法</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/ title=年终总结>年终总结</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/ title=数据结构>数据结构</a></div></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">社交</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/geekwho11 target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2 76.2-25.5 131.2-97.3 131.2-182 0-105.9-86-191.7-192-191.7z"/></svg><span>GitHub</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Email href=mailto:geekwho@xbc.me><svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg><span>geekwho@xbc.me</span></a></div></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2020 神秘极客.
<span class=footer__copyright-credits>基于 <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> 引擎和 <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a>主題</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>